# 核心任务：将 Web 应用打包为安卓 App

## 1. 当前状态与目标

**项目**: Sentencease - 一款基于 React 和 Go 的单词学习应用。

**当前状态**:
- 前后端服务已经可以稳定运行在 Docker 环境中。
- 核心的用户认证（注册/登录）和单词学习功能在 Web 浏览器中可以正常使用。
- **核心挑战**: 根据之前的计划 (`android-packaging-plan.md`)，我们选择了 **Tauri** 框架来将现有的 React Web 应用封装为安卓 App，但目前在构建 `.apk` 文件时遇到了问题，无法成功生成安装包。

**核心目标**:
解决 Tauri 在构建安卓应用过程中遇到的所有问题，并成功生成一个可以在安卓设备（模拟器或物理设备）上安装和运行的 `.apk` 文件。

---

## 2. 技术背景与现有计划

**技术选型**:
- **打包框架**: Tauri (使用 Rust 和系统原生 WebView)
- **前端**: React (Vite)
- **安卓开发环境**: Android Studio, Android SDK, NDK

**现有计划**:
我们有一个非常详细的计划文件 `android-packaging-plan.md`，其中包含了完整的环境准备、Tauri 初始化、配置、开发和构建步骤。**在执行后续步骤时，应严格参考此文件**。

---

## 3. 下一步行动 (Prompt)

您好，AI 助手。我们的核心任务是解决安卓 APK 的构建问题。请根据以下步骤，引导我完成这个过程。

**[MODE: EXECUTE]**

**1. 诊断当前构建失败的原因**
   - **1.1**: 首先，请运行构建命令 `npm run tauri android build`，并仔细检查其输出日志。
   - **1.2**: 分析日志中的**第一个关键错误信息**。根据 `android-packaging-plan.md`，构建失败可能与以下几个方面有关：
     - **环境依赖问题**: Java (JDK), Android SDK 或 NK 是否未正确安装或配置环境变量 (`JAVA_HOME`, `ANDROID_HOME`)？
     - **Rust 工具链问题**: 是否没有为安卓平台添加正确的编译目标 (target)？
     - **Tauri 配置问题**: `tauri.conf.json` 中的配置（如 `identifier`, `distDir`）是否正确？
     - **项目代码问题**: 是否存在与原生环境不兼容的代码或跨域请求？

**2. 逐一解决问题**
   - **2.1**: 根据上一步的诊断结果，从最根本的错误开始，一次只解决一个问题。
   - **2.2**: 如果是环境问题，请提供清晰的指引，帮助我检查并修复相关的环境变量和工具安装。
   - **2.3**: 如果是配置问题，请指导我修改 `tauri.conf.json` 或其他相关文件。
   - **2.4**: 在每次修改后，都**重新运行构建命令** `npm run tauri android build`，以验证修复是否生效。

**3. 完成构建与验证**
   - **3.1**: 持续重复步骤 1 和 2，直到构建命令成功执行，不再有错误。
   - **3.2**: 构建成功后，在 `src-tauri/target/release/android/` 目录下找到生成的 `.apk` 文件。
   - **3.3**: 验证该 `.apk` 文件可以被成功安装到安卓模拟器或物理设备上，并且应用可以正常启动和使用。

**请从 `步骤 1.1` 开始执行，帮助我分析构建日志，找出并解决问题。** 